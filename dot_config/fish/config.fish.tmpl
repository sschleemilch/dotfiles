function add_to_fish_user_paths_if_exists
    for dir in $argv
        if test -d $dir
            set -Ua fish_user_paths $dir
        end
    end
end
 
add_to_fish_user_paths_if_exists $HOME/.local/bin $HOME/go/bin /usr/local/bin/ $HOME/.local/share/bob/nvim-bin
 
{{ if eq .chezmoi.os "darwin" }}
add_to_fish_user_paths_if_exists /opt/homebrew/bin
set -x SHELL /opt/homebrew/bin/fish
{{ end }}


function prepend_to_sys_path_if_exists
    for dir in $argv
        if test -d $dir
            set -gx PATH $dir $PATH
        end
    end
end

{{- if eq .chezmoi.hostname "LMACL4Y3RKQ9" }}
prepend_to_sys_path_if_exists /opt/homebrew/opt/python@3.13/libexec/bin
prepend_to_sys_path_if_exists /opt/homebrew/opt/openjdk@21/bin
add_to_fish_user_paths_if_exists $HOME/Library/Android/sdk/platform-tools
set -x http_proxy 127.0.0.1:3128
set -x https_proxy 127.0.0.1:3128
set -x no_proxy 127.0.0.1,localhost,.bmwgroup.net,.cloud.bmw
set -x GOPRIVATE 'atc-github.azure.cloud.bmw/*'
{{- end }}


set -x EDITOR nvim
set -x VISUAL nvim
set -x MANPAGER 'nvim +Man!'

set -x K9S_CONFIG_DIR ~/.config/k9s
set -x RIPGREP_CONFIG_PATH ~/.config/ripgreprc

set -U fish_greeting

if status is-interactive
  fish_vi_key_bindings
  function starship_transient_prompt_func
    starship module character
  end
  starship init fish | source
  enable_transience
  zoxide init fish | source
  fzf --fish | source
  direnv hook fish | source

  # Aliases
  abbr -a g git
  abbr -a la eza -a
  abbr -a ll eza -l
  abbr -a lla eza -la
  abbr -a ls eza
  abbr -a lt eza --tree
  abbr -a tree eza --tree
  abbr -a v nvim
  abbr -a gg lazygit
  abbr -a cm chezmoi
{{- if eq .chezmoi.os "linux" }}
  abbr -a hypr 'if uwsm check may-start; exec uwsm start hyprland.desktop; end'
  abbr -a hx helix
{{- end }}
end

source ~/.config/fish/colors/{{ .colorscheme }}.fish

set -x FZF_DEFAULT_OPTS "
    --highlight-line
    --info=inline-right
    --wrap
    --tmux 60%,70%
    --ansi
    --border=sharp
    --layout=reverse
    $COLORS"

set -x _ZO_FZF_OPTS $FZF_DEFAULT_OPTS
